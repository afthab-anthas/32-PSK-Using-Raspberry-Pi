<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Constellation Results</title>
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background: #0f172a; color: #f1f5f9; padding: 40px; margin: 0; }
    h1 { text-align: center; color: #e2e8f0; margin-bottom: 30px; }
    
    /* Metrics */
    .metrics { display: flex; justify-content: center; gap: 20px; margin-bottom: 40px; flex-wrap: wrap; }
    .card { background: rgba(255,255,255,0.05); padding: 20px 30px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.1); min-width: 140px; }
    .card span { display: block; font-size: 13px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }
    .card strong { display: block; font-size: 28px; color: #38bdf8; margin-top: 8px; }
    .card.danger strong { color: #f87171; }

    /* Plots Grid 2x2 */
    .plots { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; max-width: 1000px; margin: 0 auto; }
    .plot-box { background: white; padding: 10px; border-radius: 12px; }
    img { width: 100%; height: auto; display: block; border-radius: 6px; }

    /* Back Button */
    .btn-container { text-align: center; margin-top: 50px; margin-bottom: 50px; }
    .btn { text-decoration: none; background: #1e293b; color: white; padding: 12px 30px; border-radius: 30px; border: 1px solid #334155; transition: 0.2s; }
    .btn:hover { background: #334155; border-color: #475569; }
  </style>
</head>
<body>

  <h1>MATLAB Analysis Results</h1>

  <div class="metrics">
    <div class="card">
      <span>SER (Symbol Error Rate)</span>
      <strong>{{ data.SER | round(4) }}</strong>
    </div>
    <div class="card">
      <span>BER (BIT Error Rate)</span>
      <strong>{{ data.BER | round(4) }}</strong>
    </div>
    <div class="card danger">
      <span>Bit Errors</span>
      <strong>{{ data.bit_errors }} / {{ data.total_bits }}</strong>
    </div>
  </div>

  <div class="plots">
    <div class="plot-box">
      <img src="data:image/png;base64,{{ data.plot_ideal }}" alt="Ideal Constellation">
    </div>
    <div class="plot-box">
      <img src="data:image/png;base64,{{ data.plot_tx }}" alt="Tx Symbols">
    </div>
    <div class="plot-box">
      <img src="data:image/png;base64,{{ data.plot_rx }}" alt="Rx Symbols">
    </div>
    <div class="plot-box">
      <img src="data:image/png;base64,{{ data.plot_final }}" alt="Final Constellation">
    </div>
    
    <div class="plot-box" style="grid-column: 1 / -1;"> 
      <img src="data:image/png;base64,{{ data.plot_time }}" alt="Time Domain Signals">
    </div>


  </div>

  <div class="btn-container">
    <a href="/" class="btn">‚Üê Process Another Bitstream</a>
  </div>

</body>
</html>
